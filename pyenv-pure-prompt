precmd() {
    if [[ -n $PYENV_SHELL ]]; then
        local version
        version=${(@)$(pyenv version)[1]}
        if [[ $version = system ]]; then
            PROMPT="%(?.%F{magenta}.%F{red})❯%f "
        else
            PROMPT="(pyenv $version) %(?.%F{magenta}.%F{red})❯%f "
        fi
    fi
}
